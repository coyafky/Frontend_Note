<!DOCTYPE html>
<!-- saved from url=(0080)https://juejin.im/book/5a6abad5518825733c144469/section/5a6abcb0518825733e60ab92 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><meta name="google-site-verification" content="cCHsgG9ktuCTgWgYfqCJql8AeR4gAne4DTZqztPoirE"><meta name="apple-itunes-app" content="app-id=987739104"><meta name="baidu-site-verification" content="qiK2a1kcFc"><meta name="360-site-verification" content="4c3c7d57d59f0e1a308462fbc7fd7e51"><meta name="sogou_site_verification" content="c49WUDZczQ"><title data-vue-meta="true">使用 webpack 定制前端开发环境 - teabyii - 掘金小册</title><link rel="preload" href="./07.开发和生产环境的构建配置差异_files/manifest.c82579480fd25cb3a53a.js.下载" as="script"><link rel="preload" href="./07.开发和生产环境的构建配置差异_files/vendor.fb95a9518834ba0d0725.js.下载" as="script"><link rel="preload" href="./07.开发和生产环境的构建配置差异_files/app.7c3334862cd158a4567f.js.下载" as="script"><link rel="preload" href="./07.开发和生产环境的构建配置差异_files/app.58ee683a5be62bfa85c1995bcdaa7d0b.css" as="style"><link rel="apple-touch-icon" sizes="180x180" href="https://b-gold-cdn.xitu.io/favicons/v2/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-16x16.png"><link rel="manifest" href="https://b-gold-cdn.xitu.io/favicons/v2/manifest.json"><link rel="mask-icon" href="https://b-gold-cdn.xitu.io/favicons/v2/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon.ico"><meta name="msapplication-config" content="https://b-gold-cdn.xitu.io/favicons/v2/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="search" title="掘金" href="https://b-gold-cdn.xitu.io/conf/search.xml" type="application/opensearchdescription+xml"><link rel="stylesheet" href="./07.开发和生产环境的构建配置差异_files/ionicons.min.css"><link rel="stylesheet" href="./07.开发和生产环境的构建配置差异_files/iconfont.css"><link href="./07.开发和生产环境的构建配置差异_files/app.58ee683a5be62bfa85c1995bcdaa7d0b.css" rel="stylesheet"><script async="" src="./07.开发和生产环境的构建配置差异_files/hm.js.下载"></script><script async="" src="./07.开发和生产环境的构建配置差异_files/analytics.js.下载"></script><script type="text/javascript" async="" src="./07.开发和生产环境的构建配置差异_files/vds.js.下载"></script><script type="text/javascript" charset="utf-8" async="" src="./07.开发和生产环境的构建配置差异_files/6.86717d29fac78b03d086.js.下载"></script><meta data-vmid="keywords" name="keywords" content="掘金,稀土,Vue.js,微信小程序,Kotlin,RxJava,React Native,Wireshark,敏捷开发,Bootstrap,OKHttp,正则表达式,WebGL,Webpack,Docker,MVVM" data-vue-meta="true"><meta data-vmid="description" name="description" content="掘金是一个帮助开发者成长的社区，是给开发者用的 Hacker News，给设计师用的 Designer News，和给产品经理用的 Medium。掘金的技术文章由稀土上聚集的技术大牛和极客共同编辑为你筛选出最优质的干货，其中包括：Android、iOS、前端、后端等方面的内容。用户每天都可以在这里找到技术世界的头条内容。与此同时，掘金内还有沸点、掘金翻译计划、线下活动、专栏文章等内容。即使你是 GitHub、StackOverflow、开源中国的用户，我们相信你也可以在这里有所收获。" data-vue-meta="true"></head><body cz-shortcut-listen="true" style="position: static;"><div id="juejin" data-v-6ede48a3=""><div class="global-component-box" data-v-6ede48a3=""><!----><div data-v-2840e9c3="" data-v-6ede48a3="" class="alert-list alert-list"></div><!----><!----><!----><div class="emoji-barrage" data-v-475389e2="" data-v-6ede48a3=""><!----></div><div class="book-new-user-award-popup" style="display:none;" data-v-7c95f01f="" data-v-6ede48a3=""><div class="content-box" style="display:;" data-v-7c95f01f=""><div class="close ion-close-round" data-v-7c95f01f=""></div><div class="header" data-v-7c95f01f=""><div class="icon" data-v-7c95f01f=""><img src="./07.开发和生产环境的构建配置差异_files/icon.a87e5ae.svg" data-v-7c95f01f=""></div><div class="txt" data-v-7c95f01f="">新人专享好礼</div></div><div class="desc" data-v-7c95f01f="">凡未购买过小册的用户，均可领取三张 5 折新人专享券，购买小册时自动使用专享券，最高可节省 45 元。</div><div class="tickets" data-v-7c95f01f=""><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">小册新人 5 折券</span></div><div class="sale" data-v-7c95f01f="">最高可省 15 元</div></div></div><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">小册新人 5 折券</span></div><div class="sale" data-v-7c95f01f="">最高可省 15 元</div></div></div><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">小册新人 5 折券</span></div><div class="sale" data-v-7c95f01f="">最高可省 15 元</div></div></div></div><div class="remark" data-v-7c95f01f="">注：专享券的使用期限在领券的七天内。</div><div class="submit-btn" data-v-7c95f01f="">一键领取</div></div><div class="model success" style="display:none;" data-v-7c95f01f=""><div class="heading" data-v-7c95f01f="">领取成功</div><div class="content-text" data-v-7c95f01f="">购买小册时自动使用专享券</div><div class="btn-success-footer" data-v-7c95f01f=""><div class="btn-ok" data-v-7c95f01f="">知道了</div><div class="btn-ok btn-link" data-v-7c95f01f="">前往小册首页</div></div></div><div class="model fail" style="display:none;" data-v-7c95f01f=""><div class="heading" data-v-7c95f01f="">领取失败</div><div class="content-text" data-v-7c95f01f="">本活动仅适用于小册新用户</div><div class="btn-ok" data-v-7c95f01f="">知道了</div></div></div><!----></div><!----><div data-v-a39a1c6e="" data-v-6ede48a3="" class="book-read-view"><section data-v-a39a1c6e="" class="book-section"><div data-v-a39a1c6e="" class="book-summary"><div data-v-a39a1c6e="" class="book-summary-masker"></div><div data-v-a39a1c6e="" class="book-summary-inner"><div data-v-a39a1c6e="" class="book-summary__header"><a data-v-a39a1c6e="" href="https://juejin.im/books" target="" rel="" class="logo"><img data-v-a39a1c6e="" src="./07.开发和生产环境的构建配置差异_files/logo.a7995ad.svg"></a><div data-v-a39a1c6e="" class="label">小册</div><!----></div><!----><div data-v-8a5cc2ba="" data-v-a39a1c6e="" class="section-menu book-directory bought"><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">1</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">webpack 的概念和基础使用</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">2</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">搭建基本的前端开发环境</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">3</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">webpack 如何解析代码模块路径</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">4</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">配置 loader</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">5</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">使用 plugin</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link read"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">6</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">更好地使用 webpack-dev-server</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section route-active section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">7</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">开发和生产环境的构建配置差异</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">8</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">用 HMR 提高开发效率</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">9</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">优化前端资源加载 1 - 图片加载优化和代码压缩</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">10</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">优化前端资源加载 2 - 分离代码文件</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">11</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">优化前端资源加载 3 - 进一步控制 JS 大小</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">12</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">提升 webpack 的构建速度</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">13</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">探究 webpack 内部工作流程</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">14</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">创建自己的 loader</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">15</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">创建自己的 plugin</div><!----><!----></div><!----></a><a data-v-8a5cc2ba="" class="section section-link"><div data-v-8a5cc2ba="" class="step"><div data-v-8a5cc2ba="" class="step-btn">16</div></div><div data-v-8a5cc2ba="" class="center"><div data-v-8a5cc2ba="" class="title">总结</div><!----><!----></div><!----></a></div><div data-v-a39a1c6e="" class="book-summary__footer"><div data-v-a39a1c6e="" class="qr-icon"><img data-v-a39a1c6e="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNCQUJBQkEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTExIDBoOXY5aC05VjB6TTAgMGg5djlIMFYwem0wIDExaDl2OUgwdi05em0xNC01aDNWM2gtM3Yzek0zIDZoM1YzSDN2M3ptMCAxMXYtM2gzdjNIM3ptOC02aDN2M2gtM3YtM3ptMyAzaDN2M2gtM3YtM3ptMy0zaDN2M2gtM3YtM3ptLTYgNmgzdjNoLTN2LTN6bTYgMGgzdjNoLTN2LTN6Ii8+Cjwvc3ZnPgo="></div><div data-v-a39a1c6e="" class="qr-tips"><span data-v-a39a1c6e="" class="ion-close"></span><div data-v-a39a1c6e="" class="title"><span data-v-a39a1c6e="">关注公众号</span><span data-v-a39a1c6e="">领取优惠码</span></div><div data-v-a39a1c6e="" class="qr-img"><img data-v-a39a1c6e="" src="./07.开发和生产环境的构建配置差异_files/wx-qr.13d8b4d.png"></div></div></div></div></div><div data-v-a39a1c6e="" class="book-content"><div data-v-a39a1c6e="" class="book-content-inner"><div data-v-a39a1c6e="" class="book-content__header visible"><div data-v-a39a1c6e="" class="switch"><img data-v-a39a1c6e="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQwcHgiIGhlaWdodD0iNDBweCIgdmlld0JveD0iMCAwIDQwIDQwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5qdWVqaW5fbG9nbyBjb3B5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9Imp1ZWppbl9sb2dvLWNvcHkiIHNrZXRjaDp0eXBlPSJNU0FydGJvYXJkR3JvdXAiIGZpbGw9IiMwMDdGRkYiPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMuMjgxOTk4NCw3LjcwMzA1NDUgTDE5Ljg1Mzg3MTQsNSBMMTYuMjcyMTkxOCw3LjgyNDE3NTcgTDE2LjA4NjUzODgsNy45NzM3NTcwNyBMMTkuODUzODcxNCwxMC45Nzc2MjkgTDIzLjYzMjc4NjYsNy45NzM3NTcwNyBMMjMuMjgxOTk4NCw3LjcwMzA1NDUgWiBNMzYuMjcyNzQzMywxOC4xODU2NjQgTDE5Ljg0Mzk0MzQsMzEuMTQwMDA2NCBMMy40MjUwNzE0MywxOC4xOTM2MDY0IEwxLDIwLjE0MTQ3MzUgTDE5Ljg0Mzk0MzQsMzUgTDM4LjY5ODE0NTcsMjAuMTMzNTMxMiBMMzYuMjcyNzQzMywxOC4xODU2NjQgWiBNMTkuODQzOTQzNCwxOS4yMzY3MDQ4IEwxMC45MDM4MDksMTIuMTg3NTE3MiBMOC40Nzg0MDY2NywxNC4xMzUzODQ0IEwxOS44NDM5NDM0LDIzLjA5NzAyOTMgTDMxLjIxOTA3NzEsMTQuMTI3NDQyIEwyOC43OTM2NzQ4LDEyLjE3OTU3NDkgTDE5Ljg0Mzk0MzQsMTkuMjM2NzA0OCBaIiBpZD0iRmlsbC0xLUNvcHktMiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></div><div data-v-a39a1c6e="" class="menu"><img data-v-a39a1c6e="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxM3B4IiB2aWV3Qm94PSIwIDAgMTYgMTMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ3LjEgKDQ1NDIyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCA0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IuWFqOWxjyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IjJfZnVsbHNjcmVlbl9jbG9zZS1zaWRlYmFyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTkuMDAwMDAwLCAtMjUuMDAwMDAwKSIgZmlsbD0iIzk3OTc5NyI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC00IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOS4wMDAwMDAsIDI1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0zIiB4PSIwIiB5PSI1LjUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMyIgeD0iMCIgeT0iMCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjEuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0zLUNvcHkiIHg9IjAiIHk9IjExIiB3aWR0aD0iMTYiIGhlaWdodD0iMS41Ij48L3JlY3Q+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="></div><div data-v-a39a1c6e="" class="title"><a data-v-a39a1c6e="" href="https://juejin.im/book/5a6abad5518825733c144469" target="" rel="">使用 webpack 定制前端开发环境</a></div><div data-v-11fc2358="" data-v-a39a1c6e="" class="user-auth user-auth"><div data-v-11fc2358="" class="nav-item menu"><div data-v-b2db8566="" data-v-1b9df826="" data-v-11fc2358="" data-src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJd4qPDEPyyBz2ial1lYRiaatIpUpHSQlyX1ibbTkY8kGrH7ia1Nnic7spTlXPcly2zGD30IdUKF81iccNQ/132" class="lazy avatar avatar loaded" title="" style="background-image: url(&quot;https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJd4qPDEPyyBz2ial1lYRiaatIpUpHSQlyX1ibbTkY8kGrH7ia1Nnic7spTlXPcly2zGD30IdUKF81iccNQ/132&quot;);"></div><div data-v-11fc2358="" class="nav-menu user-dropdown-list" style="display: none;"><ul data-v-11fc2358="" class="nav-menu-item-group"><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358=""><i data-v-11fc2358="" class="fengwei fw-write"></i><span data-v-11fc2358="">写文章</span></a></li><!----><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358=""><i data-v-11fc2358="" class="fengwei fw-draft"></i><span data-v-11fc2358="">草稿</span></a></li></ul><ul data-v-11fc2358="" class="nav-menu-item-group"><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/user/5b6004aee51d4519873f7a5b"><i data-v-11fc2358="" class="fengwei fw-person"></i><span data-v-11fc2358="">我的主页</span></a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/user/5b6004aee51d4519873f7a5b/likes"><i data-v-11fc2358="" class="fengwei fw-like"></i><span data-v-11fc2358="">我喜欢的</span></a></li><!----><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/user/5b6004aee51d4519873f7a5b/collections"><i data-v-11fc2358="" class="fengwei fw-collection"></i><span data-v-11fc2358="">我的收藏集</span></a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/user/5b6004aee51d4519873f7a5b/books?type=bought"><i data-v-11fc2358="" class="fengwei fw-bought"></i><span data-v-11fc2358="">已购</span></a></li><!----><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/subscribe"><i data-v-11fc2358="" class="fengwei fw-tag"></i><span data-v-11fc2358="">标签管理</span></a></li></ul><ul data-v-11fc2358="" class="nav-menu-item-group"><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/user/settings"><i data-v-11fc2358="" class="fengwei fw-setting"></i><span data-v-11fc2358="">设置</span></a></li><li data-v-11fc2358="" class="nav-menu-item more"><a data-v-11fc2358=""><i data-v-11fc2358="" class="fengwei fw-info"></i><span data-v-11fc2358="">关于</span><i data-v-11fc2358="" class="ion-chevron-right more-icon"></i></a><div data-v-11fc2358="" class="nav-menu more-dropdown-list"><ul data-v-11fc2358="" class="nav-menu-item-group"><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/app" target="_blank">下载应用</a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://juejin.im/about" target="_blank">关于</a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://xitu.io/jobs" target="_blank">加入我们</a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://github.com/xitu/gold-miner" rel="nofollow noopener noreferrer" target="_blank">翻译计划</a></li><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358="" href="https://bd.juejin.im/?utm_campaign=bd&amp;utm_source=web&amp;utm_medium=nav" target="_blank">合作伙伴</a></li></ul></div></li></ul><ul data-v-11fc2358="" class="nav-menu-item-group"><li data-v-11fc2358="" class="nav-menu-item"><a data-v-11fc2358=""><i data-v-11fc2358="" class="fengwei fw-logout"></i><span data-v-11fc2358="">登出</span></a></li></ul></div></div><!----></div><!----></div><div data-v-a39a1c6e="" class="book-body transition--next"><div data-v-decff8c4="" data-v-a39a1c6e="" class="section-view book-section-content"><div data-v-41acfafa="" data-v-decff8c4="" class="section-content"><div data-v-41acfafa="" class="section-page book-section-view"><div data-v-41acfafa="" class="entry-content article-content"><h1 class="heading" data-id="heading-0">开发和生产环境的构建配置差异</h1>
<p>我们在日常的前端开发工作中，一般都会有两套构建环境：一套开发时使用，构建结果用于本地开发调试，不进行代码压缩，打印 debug 信息，包含 sourcemap 文件；另外一套构建后的结果是直接应用于线上的，即代码都是压缩后，运行时不打印 debug 信息，静态文件不包括 sourcemap 的。有的时候可能还需要多一套测试环境，在运行时直接进行请求 mock 等工作。</p>
<p>webpack 4.x 版本引入了 mode 的概念，在运行 webpack 时需要指定使用 production 或 development 两个 mode 其中一个，这个功能也就是我们所需要的运行两套构建环境的能力。</p>
<p>当你指定使用 production mode 时，默认会启用各种性能优化的功能，包括构建结果优化以及 webpack 运行性能优化，而如果是 development mode 的话，则会开启 debug 工具，运行时打印详细的错误信息，以及更加快速的增量编译构建。关于这两个 mode 的更详细区别，可以查阅 webpack 作者的这篇文章：<a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fmedium.com%2Fwebpack%2Fwebpack-4-mode-and-optimization-5423a6bc597a" rel="nofollow noopener noreferrer">webpack 4: mode and optimization</a>。</p>
<p>虽然 webpack 的 mode 参数已经给我们带来了一些很方便的环境差异化配置，但是针对一些项目情况，例如使用 css-loader 或者 url-loader 等，不同环境传入 loader 的配置也不一样，而 mode 并没有帮助我们做这些事情，因此有些配置还是需要手动区分环境后来进行调整。</p>
<h2 class="heading" data-id="heading-1">在配置文件中区分 mode</h2>
<p>之前我们的配置文件都是直接对外暴露一个 JS 对象，这种方式暂时没有办法获取到 webpack 的 mode 参数，我们需要更换一种方式来处理配置。根据官方的文档<a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fdoc.webpack-china.org%2Fconfiguration%2Fconfiguration-types%2F" rel="nofollow noopener noreferrer">多种配置类型</a>，配置文件可以对外暴露一个函数，因此我们可以这样做：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function">(<span class="hljs-params">env, argv</span>) =&gt;</span> ({
  <span class="hljs-comment">// ... 其他配置</span>
  optimization: {
    <span class="hljs-attr">minimize</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// 使用 argv 来获取 mode 参数的值</span>
    minimizer: argv.mode === <span class="hljs-string">'production'</span> ? [
      <span class="hljs-keyword">new</span> UglifyJsPlugin({ <span class="hljs-comment">/* 你自己的配置 */</span> }), 
      <span class="hljs-comment">// 仅在我们要自定义压缩配置时才需要这么做</span>
      <span class="hljs-comment">// mode 为 production 时 webpack 会默认使用压缩 JS 的 plugin</span>
    ] : [],
  },
})
</code></pre><p>这样获取 mode 之后，我们就能够区分不同的构建环境，然后根据不同环境再对特殊的 loader 或 plugin 做额外的配置就可以了。</p>
<p>以上是 webpack 4.x 的做法，由于有了 mode 参数，区分环境变得简单了。不过在当前业界，估计还是使用 webpack 3.x 版本的居多，所以这里也简单介绍一下 3.x 如何区分环境。</p>
<p>webpack 的运行时环境是 Node.js，我们可以通过 Node.js 提供的机制给要运行的 webpack 程序传递环境变量，来控制不同环境下的构建行为。例如，我们在 npm 中的 <code>scripts</code> 字段添加一个用于生产环境的构建命令：</p>
<pre><code class="hljs json" lang="json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"NODE_ENV=production webpack"</span>,
    <span class="hljs-attr">"develop"</span>: <span class="hljs-string">"NODE_ENV=development webpack-dev-server"</span>
  }
}
</code></pre><p>然后在 <code>webpack.config.js</code> 文件中可以通过 <code>process.env.NODE_ENV</code> 来获取命令传入的环境变量：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// ... webpack 配置</span>
}

<span class="hljs-keyword">if</span> (process.env.NODE_ENV === <span class="hljs-string">'production'</span>) {
  <span class="hljs-comment">// 生产环境需要做的事情，如使用代码压缩插件等</span>
  config.plugins.push(<span class="hljs-keyword">new</span> UglifyJsPlugin())
}

<span class="hljs-built_in">module</span>.exports = config
</code></pre><h2 class="heading" data-id="heading-2">运行时的环境变量</h2>
<p>我们使用 webpack 时传递的 mode 参数，是可以在我们的应用代码运行时，通过 <code>process.env.NODE_ENV</code> 这个变量获取的。这样方便我们在运行时判断当前执行的构建环境，使用最多的场景莫过于控制是否打印 debug 信息。</p>
<p>下面这个简单的例子，在应用开发的代码中实现一个简单的 console 打印封装：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">...args</span>) </span>{
  <span class="hljs-keyword">if</span> (process.env.NODE_ENV === <span class="hljs-string">'development'</span> &amp;&amp; <span class="hljs-built_in">console</span> &amp;&amp; <span class="hljs-built_in">console</span>.log) {
    <span class="hljs-built_in">console</span>.log.apply(<span class="hljs-built_in">console</span>, args)
  }
}
</code></pre><p>同样，以上是 webpack 4.x 的做法，下面简单介绍一下 3.x 版本应该如何实现。这里需要用到 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fdoc.webpack-china.org%2Fplugins%2Fdefine-plugin" rel="nofollow noopener noreferrer">DefinePlugin</a> 插件，它可以帮助我们在构建时给运行时定义变量，那么我们只要在前面 webpack 3.x 版本区分构建环境的例子的基础上，再使用 DefinePlugin 添加环境变量即可影响到运行时的代码。</p>
<p>在 webpack 的配置中添加 DefinePlugin 插件：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-comment">// webpack 的配置</span>

  plugins: [
    <span class="hljs-keyword">new</span> webpack.DefinePlugin({
      <span class="hljs-comment">// webpack 3.x 的 process.env.NODE_ENV 是通过手动在命令行中指定 NODE_ENV=... 的方式来传递的</span>
      <span class="hljs-string">'process.env.NODE_ENV'</span>: <span class="hljs-built_in">JSON</span>.stringify(process.env.NODE_ENV),
    }),
  ],
}
</code></pre><h2 class="heading" data-id="heading-3">常见的环境差异配置</h2>
<p>前面提及的使用环境变量的方式可以让我们在不同的构建环境中完成不同的构建需求，这里列举一下常见的 webpack 构建差异配置：</p>
<ul>
<li>生产环境可能需要分离 CSS 成单独的文件，以便多个页面共享同一个 CSS 文件</li>
<li>生产环境需要压缩 HTML/CSS/JS 代码</li>
<li>生产环境需要压缩图片</li>
<li>开发环境需要生成 sourcemap 文件</li>
<li>开发环境需要打印 debug 信息</li>
<li>开发环境需要 live reload 或者 hot reload 的功能</li>
</ul>
<p>以上是常见的构建环境需求差异，可能更加复杂的项目中会有更多的构建需求（如划分静态域名等），但是我们都可以通过判断环境变量来实现这些有环境差异的构建需求。</p>
<p>webpack 4.x 的 mode 已经提供了上述差异配置的大部分功能，mode 为 production 时默认使用 JS 代码压缩，而 mode 为 development 时默认启用 hot reload，等等。这样让我们的配置更为简洁，我们只需要针对特别使用的 loader 和 plugin 做区分配置就可以了。</p>
<p>webpack 3.x 版本还是只能自己动手修改配置来满足大部分环境差异需求，所以如果你要开始一个新的项目，建议直接使用 webpack 4.x 版本。</p>
<h2 class="heading" data-id="heading-4">拆分配置</h2>
<p>前面我们列出了几个环境差异配置，可能这些构建需求就已经有点多了，会让整个 webpack 的配置变得复杂，尤其是有着大量环境变量判断的配置。我们可以把 webpack 的配置按照不同的环境拆分成多个文件，运行时直接根据环境变量加载对应的配置即可。基本的划分如下：</p>
<ul>
<li>webpack.base.js：基础部分，即多个文件中共享的配置</li>
<li>webpack.development.js：开发环境使用的配置</li>
<li>webpack.production.js：生产环境使用的配置</li>
<li>webpack.test.js：测试环境使用的配置</li>
</ul>
<p>一些复杂的项目可能会有更多配置。这里介绍一下如何处理这样的配置拆分。</p>
<p>首先我们要明白，对于 webpack 的配置，其实是对外暴露一个 JS 对象，所以对于这个对象，我们都可以用 JS 代码来修改它，例如：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// ... webpack 配置</span>
}

<span class="hljs-comment">// 我们可以修改这个 config 来调整配置，例如添加一个新的插件</span>
config.plugins.push(<span class="hljs-keyword">new</span> YourPlugin());

<span class="hljs-built_in">module</span>.exports = config;
</code></pre><p>当然，如果是对外暴露一个 JS 函数的话，像本小节第一个例子那样，那么修改配置就更加容易了，这里不再举例说明。</p>
<p>因此，只要有一个工具能比较智能地合并多个配置对象，我们就可以很轻松地拆分 webpack 配置，然后通过判断环境变量，使用工具将对应环境的多个配置对象整合后提供给 webpack 使用。这个工具就是 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fsurvivejs%2Fwebpack-merge" rel="nofollow noopener noreferrer">webpack-merge</a>。</p>
<p>我们的 webpack 配置基础部分，即 webpack.base.js 应该大致是这样的：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'...'</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-comment">// 这里是一个简单的例子，后面介绍 API 时会用到</span>
    rules: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>, 
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'babel'</span>],
      },
    ],
    <span class="hljs-comment">// ...</span>
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ...</span>
  ],
}
</code></pre><p>然后 webpack.development.js 需要添加 loader 或 plugin，就可以使用 webpack-merge 的 API，例如：</p>
<pre><code class="hljs js" lang="js"><span class="hljs-keyword">const</span> { smart } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-merge'</span>)
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>)
<span class="hljs-keyword">const</span> base = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.base.js'</span>)

<span class="hljs-built_in">module</span>.exports = smart(base, {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      <span class="hljs-comment">// 用 smart API，当这里的匹配规则相同且 use 值都是数组时，smart 会识别后处理</span>
      <span class="hljs-comment">// 和上述 base 配置合并后，这里会是 { test: /\.js$/, use: ['babel', 'coffee'] }</span>
      <span class="hljs-comment">// 如果这里 use 的值用的是字符串或者对象的话，那么会替换掉原本的规则 use 的值</span>
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">'coffee'</span>],
      },
      <span class="hljs-comment">// ...</span>
    ],
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// plugins 这里的数组会和 base 中的 plugins 数组进行合并</span>
    <span class="hljs-keyword">new</span> webpack.DefinePlugin({
      <span class="hljs-string">'process.env.NODE_ENV'</span>: <span class="hljs-built_in">JSON</span>.stringify(process.env.NODE_ENV),
    }),
  ],
})
</code></pre><p>可见 webpack-merge 提供的 <code>smart</code> 方法，可以帮助我们更加轻松地处理 loader 配置的合并。webpack-merge 还有其他 API 可以用于自定义合并行为，这里就不详细介绍了，需要深入了解的同学可以查阅官方文档 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fsurvivejs%2Fwebpack-merge" rel="nofollow noopener noreferrer">webpack-merge</a>。</p>
<h2 class="heading" data-id="heading-5">小结</h2>
<p>本小节介绍了 webpack 4.x 和 3.x 如何在配置文件中区分环境来应用不同的配置选项（4.x 使用 mode 参数，3.x 使用 Node.js 的 <code>process.env.NODE_ENV</code>），如何在应用代码运行时携带当前构建环境的相关信息，以及如何利用 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fsurvivejs%2Fwebpack-merge" rel="nofollow noopener noreferrer">webpack-merge</a> 这个工具来更好地维护不同构建环境中对应的构建需求配置。</p>
<h2 class="heading" data-id="heading-6">例子</h2>
<p>本小节提及的一些简单的 Demo 可以在 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fteabyii%2Fwebpack-examples" rel="nofollow noopener noreferrer">webpack-examples</a> 找到。</p>
</div><section data-v-41acfafa="" class="book-comments"><div data-v-41acfafa="" class="box-title">留言</div><div data-v-41acfafa="" class="comment-box"><div data-v-efcd2e56="" data-v-41acfafa="" class="comment-form comment-form" id="comment"><div data-v-b2db8566="" data-v-1b9df826="" data-v-efcd2e56="" data-src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJd4qPDEPyyBz2ial1lYRiaatIpUpHSQlyX1ibbTkY8kGrH7ia1Nnic7spTlXPcly2zGD30IdUKF81iccNQ/132" class="lazy avatar avatar loaded" title="" style="background-image: url(&quot;https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJd4qPDEPyyBz2ial1lYRiaatIpUpHSQlyX1ibbTkY8kGrH7ia1Nnic7spTlXPcly2zGD30IdUKF81iccNQ/132&quot;);"></div><textarea data-v-efcd2e56="" placeholder="评论将在后台进行审核，审核通过后对所有人可见" class="content-input" style="overflow: hidden; word-wrap: break-word; height: 60px;"></textarea><div data-v-efcd2e56="" class="action-box" style="display: none;"><div data-v-54e3f196="" data-v-efcd2e56="" class="image-uploader image-uploader" style="display: none;"><input data-v-54e3f196="" type="file" class="input"><button data-v-54e3f196="" class="upload-btn"><i data-v-54e3f196="" class="icon ion-image"></i><span data-v-54e3f196="">上传图片</span></button></div><div data-v-efcd2e56="" class="submit-box"><span data-v-efcd2e56="" class="submit-text">Ctrl or ⌘ + Enter</span><button data-v-efcd2e56="" class="submit-btn">评论</button></div></div><!----></div></div><ul data-v-51163f89="" data-v-41acfafa="" st:block="commentList" class="comment-list comment-list"><li data-v-51163f89="" class="item"><div data-v-7f6a837b="" data-v-51163f89="" class="comment"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="599f9a2e6fb9a0247a60dfc2" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/599f9a2e6fb9a0247a60dfc2" target="_blank" rel="" data-v-311d2efa=""><div data-v-b2db8566="" data-v-1b9df826="" data-v-7f6a837b="" data-src="https://wx.qlogo.cn/mmopen/qKWLW7BIlaNN01bsIdkOia7icSV64G3KKVUVj9xoFOpcQZHvvzbYopbx5qIMEXsMT0Mg27ff0CyPiaVtZJUvRM6Hlrmrc2Jiak91/0" class="lazy avatar avatar" title="" style="background-image: none;"></div></a></div><div data-v-7f6a837b="" class="content-box"><div data-v-7f6a837b="" class="header"><div data-v-7f6a837b="" class="user-info"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="599f9a2e6fb9a0247a60dfc2" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/599f9a2e6fb9a0247a60dfc2" target="_blank" rel="" class="username" data-v-311d2efa="">静安</a></div><div data-v-7f6a837b="" class="position"></div></div></div><div data-v-7f6a837b="" class="content"><!----><span data-v-7f6a837b="" class="content-html">4.0那我要在其它js获取运行时环境变量怎么获取，或者怎么代替这个process.env.NODE_ENV</span><!----></div><div data-v-7f6a837b="" class="footer"><button data-v-7f6a837b="" class="like-btn"><i data-v-7f6a837b="" class="collection-arrow-ion ion-arrow-up-b"></i><span data-v-7f6a837b="">0</span></button><span data-v-7f6a837b="" class="sub-comment-btn text-pointer"><span data-v-7f6a837b="" class="title">收起评论</span><div data-v-7f6a837b="" class="sub-comment--arrow" style=""></div></span><span data-v-7f6a837b="" class="date">3月前</span><!----></div><div data-v-746db1b2="" data-v-7f6a837b="" class="sub-comment-box sub-comment-box"><div data-v-746db1b2="" class="sub-comment-box__top"><div data-v-746db1b2="" class="icon-close"></div><h3 data-v-746db1b2="">评论</h3></div><div data-v-746db1b2="" class="sub-comment-box__inner"><div data-v-746db1b2=""><ul data-v-746db1b2="" class="sub-comment-list"><li data-v-746db1b2="" class="item"><div data-v-6fdfc18a="" data-v-746db1b2="" class="sub-comment sub-comment"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="57f4f6b9128fe1005444e434" class="user-popover-box user-popover--avatar"><!----><div data-v-b2db8566="" data-v-1b9df826="" data-v-6fdfc18a="" data-src="https://user-gold-cdn.xitu.io/2017/12/15/160592d181ffe316?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar" title="" data-v-311d2efa="" style="background-image: none;"></div></div><div data-v-6fdfc18a="" class="content-box"><div data-v-6fdfc18a="" class="header"><div data-v-6fdfc18a="" class="user-info"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="57f4f6b9128fe1005444e434" class="user-popover-box user-popover--info"><!----><a data-v-6fdfc18a="" href="https://juejin.im/user/57f4f6b9128fe1005444e434" target="_blank" rel="" class="username" data-v-311d2efa="">我叫吕胖胖</a></div><div data-v-6fdfc18a="" class="position">https://github.com/lvpangpang @ 铜板街</div></div></div><div data-v-6fdfc18a="" class="content"><!----><span data-v-6fdfc18a="" class="content-html">指定mode后 在你的业务js 直接process.env.NODE_ENV 就能获取到  不用走process.env.NODE_EN</span><!----></div><div data-v-6fdfc18a="" class="footer"><span data-v-6fdfc18a="" class="date">3月前</span><a data-v-6fdfc18a="" class="reply-btn">回复</a><!----></div></div><!----></div></li></ul><!----></div><form data-v-746db1b2="" class="reply-form"><textarea data-v-746db1b2="" rows="1" maxlength="1024" placeholder="评论审核通过后显示" style="overflow: hidden; word-wrap: break-word; height: 35px;"></textarea><button data-v-746db1b2="" class="reply-btn">评论</button></form></div></div></div><!----></div></li><li data-v-51163f89="" class="item"><div data-v-7f6a837b="" data-v-51163f89="" class="comment"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="59c9a2855188257e7a42a4c7" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/59c9a2855188257e7a42a4c7" target="_blank" rel="" data-v-311d2efa=""><div data-v-b2db8566="" data-v-1b9df826="" data-v-7f6a837b="" data-src="https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoXwt6tZZFRaEk3d20v6dFVz4ovNNQ42zgd0y5rAc435373ECDToicxPd8dGEjxGefokgia609oYAYw/0" class="lazy avatar avatar" title="" style="background-image: none;"></div></a></div><div data-v-7f6a837b="" class="content-box"><div data-v-7f6a837b="" class="header"><div data-v-7f6a837b="" class="user-info"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="59c9a2855188257e7a42a4c7" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/59c9a2855188257e7a42a4c7" target="_blank" rel="" class="username" data-v-311d2efa="">大圣巴巴</a></div><div data-v-7f6a837b="" class="position">高级软件工程师 @ 软通动力</div></div></div><div data-v-7f6a837b="" class="content"><!----><span data-v-7f6a837b="" class="content-html">官方示例是用 env.production取mode，你这个是用argv.env取mode</span><!----></div><div data-v-7f6a837b="" class="footer"><button data-v-7f6a837b="" class="like-btn"><i data-v-7f6a837b="" class="collection-arrow-ion ion-arrow-up-b"></i><span data-v-7f6a837b="">0</span></button><span data-v-7f6a837b="" class="sub-comment-btn text-pointer"><span data-v-7f6a837b="" class="title">收起评论</span><div data-v-7f6a837b="" class="sub-comment--arrow" style=""></div></span><span data-v-7f6a837b="" class="date">4月前</span><!----></div><div data-v-746db1b2="" data-v-7f6a837b="" class="sub-comment-box sub-comment-box"><div data-v-746db1b2="" class="sub-comment-box__top"><div data-v-746db1b2="" class="icon-close"></div><h3 data-v-746db1b2="">评论</h3></div><div data-v-746db1b2="" class="sub-comment-box__inner"><div data-v-746db1b2=""><ul data-v-746db1b2="" class="sub-comment-list"><li data-v-746db1b2="" class="item"><div data-v-6fdfc18a="" data-v-746db1b2="" class="sub-comment sub-comment"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="59c9a2855188257e7a42a4c7" class="user-popover-box user-popover--avatar"><!----><div data-v-b2db8566="" data-v-1b9df826="" data-v-6fdfc18a="" data-src="https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoXwt6tZZFRaEk3d20v6dFVz4ovNNQ42zgd0y5rAc435373ECDToicxPd8dGEjxGefokgia609oYAYw/0" class="lazy avatar avatar" title="" data-v-311d2efa="" style="background-image: none;"></div></div><div data-v-6fdfc18a="" class="content-box"><div data-v-6fdfc18a="" class="header"><div data-v-6fdfc18a="" class="user-info"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="59c9a2855188257e7a42a4c7" class="user-popover-box user-popover--info"><!----><a data-v-6fdfc18a="" href="https://juejin.im/user/59c9a2855188257e7a42a4c7" target="_blank" rel="" class="username" data-v-311d2efa="">大圣巴巴</a></div><div data-v-6fdfc18a="" class="position">高级软件工程师 @ 软通动力</div></div></div><div data-v-6fdfc18a="" class="content"><!----><span data-v-6fdfc18a="" class="content-html">知道了，env.production是 获取自定义变量</span><!----></div><div data-v-6fdfc18a="" class="footer"><span data-v-6fdfc18a="" class="date">4月前</span><a data-v-6fdfc18a="" class="reply-btn">回复</a><!----></div></div><!----></div></li></ul><!----></div><form data-v-746db1b2="" class="reply-form"><textarea data-v-746db1b2="" rows="1" maxlength="1024" placeholder="评论审核通过后显示" style="overflow: hidden; word-wrap: break-word; height: 35px;"></textarea><button data-v-746db1b2="" class="reply-btn">评论</button></form></div></div></div><!----></div></li><li data-v-51163f89="" class="item"><div data-v-7f6a837b="" data-v-51163f89="" class="comment"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="5a23ad6551882535cd4aa63e" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/5a23ad6551882535cd4aa63e" target="_blank" rel="" data-v-311d2efa=""><div data-v-b2db8566="" data-v-1b9df826="" data-v-7f6a837b="" data-src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCIgdmlld0JveD0iMCAwIDM2IDM2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kZWZhdWx0X2dyYXZhdGFyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImRlZmF1bHRfZ3JhdmF0YXIiIHNrZXRjaDp0eXBlPSJNU0FydGJvYXJkR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTIxMC0rLUltcG9ydGVkLUxheWVycy1Db3B5LUNvcHkiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0yMTAiIGZpbGw9IiNEOEQ4RDgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHg9IjAiIHk9IjAiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTI3Ljg2OTAzMjEsMjYuODUzNjU2OCBMOCwyNi44NTM2NTY4IEM4LDI1Ljg0OTQ1MTQgOC40NzE4MjUsMjQuMTEwOTQ2NiAxMS41MTg5MDQ1LDIyLjM4ODMxNzYgQzEyLjE1Nzg5NiwyMi4wMjcxMjEzIDE1LjM0Mzk1MTIsMjAuMDk2MTA5OCAxNS42MTU5Njc3LDE5LjYzNzE3MjEgQzE1LjkyNDU4MjgsMTkuMTE3MjA4MSAxNi4wMTA2Mzg5LDE4LjQ3NjE4MzcgMTUuNDIwMTE1OCwxNy41MzI1MDg1IEMxNS4zNzI2MzY2LDE3LjQ1NjEwMTYgMTQuNDM0OTIxNSwxNi4wMDgzMzkxIDE0LjE0NTEwMDMsMTUuMDMwNDI5NyBDMTMuOTQwMzQ2LDE0LjMzODMwMiAxMy45MTc1OTU1LDEzLjU0NTQ1NjEgMTMuOTE3NTk1NSwxMi43MTM0MTQ0IEMxMy45MTc1OTU1LDkuODM2MjQ3MDIgMTUuNzIyMzAxNCw4IDE3Ljk0ODM4NTYsOCBDMjAuMTc0NDY5OSw4IDIxLjk3OTE3NTgsOS44MzYyNDcwMiAyMS45NzkxNzU4LDEyLjcxMzQxNDQgQzIxLjk3OTE3NTgsMTMuMzk5MDkyMiAyMS45NjYzMTY4LDE0LjA1NTk5MzMgMjEuODQ3MTI0MSwxNC42NTM4NTI3IEMyMS42Mzk4OTcsMTUuNjkwMzA3NyAyMC43NzU4NzM2LDE3LjAwNTU5ODQgMjAuNTg4NDI5NSwxNy4zMzA1NzU5IEMyMC41NDM5MTc3LDE3LjQwNzQ3OSAyMC41MDc4MTM3LDE3LjQ2NzUxMyAyMC40ODUwNjMzLDE3LjUwMTI1MTEgQzIwLjA3OTAxNjgsMTguMTA3MDQ4OSAxOS45NjI3OTE2LDE4LjU1MzU4MjkgMjAuMDAwODczOSwxOC45MTUyNzU1IEMyMC4wNDQzOTY1LDE5LjMyODU2NzUgMjAuMzEzOTQwMSwxOS42MTYzMzM4IDIwLjY2NzA2NywxOS44NTQ0ODUzIEMyMS4wMzQ1MzY2LDIwLjEwMjA2MzYgMjQuMDExODgxLDIyLjE0OTY3IDI0LjM3Nzg2NjgsMjIuMzg4MzE3NiBDMjYuODcxNTE2MywyNC4wMTY2NzgzIDI3Ljg2OTAzMjEsMjUuNjA2MzM4NSAyNy44NjkwMzIxLDI2Ljg1MzY1NjggTDI3Ljg2OTAzMjEsMjYuODUzNjU2OCBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+" class="lazy avatar avatar" title="" style="background-image: none;"></div></a></div><div data-v-7f6a837b="" class="content-box"><div data-v-7f6a837b="" class="header"><div data-v-7f6a837b="" class="user-info"><div data-v-311d2efa="" data-v-7f6a837b="" st:block="userPopover" st:state="5a23ad6551882535cd4aa63e" class="user-popover-box"><!----><a data-v-7f6a837b="" href="https://juejin.im/user/5a23ad6551882535cd4aa63e" target="_blank" rel="" class="username" data-v-311d2efa="">像风一样的男人</a></div><div data-v-7f6a837b="" class="position"></div></div></div><div data-v-7f6a837b="" class="content"><!----><span data-v-7f6a837b="" class="content-html">module.exports = (env, argv) =&gt; ({})
env.production是在script脚本下通过 cross-env NODE_ENV= ...传参吧
argv是什么 argv.mode 是接受 --mode ... 的参数吗</span><!----></div><div data-v-7f6a837b="" class="footer"><button data-v-7f6a837b="" class="like-btn"><i data-v-7f6a837b="" class="collection-arrow-ion ion-arrow-up-b"></i><span data-v-7f6a837b="">0</span></button><span data-v-7f6a837b="" class="sub-comment-btn text-pointer"><span data-v-7f6a837b="" class="title">收起评论</span><div data-v-7f6a837b="" class="sub-comment--arrow" style=""></div></span><span data-v-7f6a837b="" class="date">4月前</span><!----></div><div data-v-746db1b2="" data-v-7f6a837b="" class="sub-comment-box sub-comment-box"><div data-v-746db1b2="" class="sub-comment-box__top"><div data-v-746db1b2="" class="icon-close"></div><h3 data-v-746db1b2="">评论</h3></div><div data-v-746db1b2="" class="sub-comment-box__inner"><div data-v-746db1b2=""><ul data-v-746db1b2="" class="sub-comment-list"><li data-v-746db1b2="" class="item"><div data-v-6fdfc18a="" data-v-746db1b2="" class="sub-comment sub-comment"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="57f4f6b9128fe1005444e434" class="user-popover-box user-popover--avatar"><!----><div data-v-b2db8566="" data-v-1b9df826="" data-v-6fdfc18a="" data-src="https://user-gold-cdn.xitu.io/2017/12/15/160592d181ffe316?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar" title="" data-v-311d2efa="" style="background-image: none;"></div></div><div data-v-6fdfc18a="" class="content-box"><div data-v-6fdfc18a="" class="header"><div data-v-6fdfc18a="" class="user-info"><div data-v-311d2efa="" data-v-6fdfc18a="" st:block="userPopover" st:state="57f4f6b9128fe1005444e434" class="user-popover-box user-popover--info"><!----><a data-v-6fdfc18a="" href="https://juejin.im/user/57f4f6b9128fe1005444e434" target="_blank" rel="" class="username" data-v-311d2efa="">我叫吕胖胖</a></div><div data-v-6fdfc18a="" class="position">https://github.com/lvpangpang @ 铜板街</div></div></div><div data-v-6fdfc18a="" class="content"><!----><span data-v-6fdfc18a="" class="content-html">你可以多看看node  webpack 看着感觉很烦的 都是 node不熟悉哈 本胖也是</span><!----></div><div data-v-6fdfc18a="" class="footer"><span data-v-6fdfc18a="" class="date">3月前</span><a data-v-6fdfc18a="" class="reply-btn">回复</a><!----></div></div><!----></div></li></ul><!----></div><form data-v-746db1b2="" class="reply-form"><textarea data-v-746db1b2="" rows="1" maxlength="1024" placeholder="评论审核通过后显示" style="overflow: hidden; word-wrap: break-word; height: 35px;"></textarea><button data-v-746db1b2="" class="reply-btn">评论</button></form></div></div></div><!----></div></li><!----></ul></section></div></div><!----><!----></div></div><div data-v-76ca1e36="" data-v-a39a1c6e="" class="book-handle book-direction"><div data-v-76ca1e36="" class="step-btn step-btn--prev"><img data-v-76ca1e36="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOSAyM2wtNy02LjUgNy02LjUiLz4KPC9zdmc+Cg=="></div><div data-v-76ca1e36="" class="step-btn step-btn--next"><img data-v-76ca1e36="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMyAyMmw3LTYuNUwxMyA5Ii8+Cjwvc3ZnPgo="></div><!----><!----></div><!----></div></div></section><!----><!----><div data-v-f0e3c22e="" data-v-a39a1c6e="" class="image-viewer-box"><!----></div></div><!----></div>
      
      <script type="text/javascript" src="./07.开发和生产环境的构建配置差异_files/manifest.c82579480fd25cb3a53a.js.下载"></script><script type="text/javascript" src="./07.开发和生产环境的构建配置差异_files/vendor.fb95a9518834ba0d0725.js.下载"></script><script type="text/javascript" src="./07.开发和生产环境的构建配置差异_files/app.7c3334862cd158a4567f.js.下载"></script>
    <div style="position: static; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px;"><div id="trans-tooltip"><div id="tip-left-top" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-left-top.png&quot;);"></div><div id="tip-top" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-top.png&quot;) repeat-x;"></div><div id="tip-right-top" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-right-top.png&quot;);"></div><div id="tip-right" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-right.png&quot;) repeat-y;"></div><div id="tip-right-bottom" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-right-bottom.png&quot;);"></div><div id="tip-bottom" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-bottom.png&quot;) repeat-x;"></div><div id="tip-left-bottom" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-left-bottom.png&quot;);"></div><div id="tip-left" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-left.png&quot;);"></div><div id="trans-content"></div></div><div id="tip-arrow-bottom" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-arrow-bottom.png&quot;);"></div><div id="tip-arrow-top" style="background: url(&quot;chrome-extension://ccfjcepmiaackkccabgeeegeklgifffd/imgs/map/tip-arrow-top.png&quot;);"></div></div></body></html>